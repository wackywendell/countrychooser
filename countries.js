"use strict";

var countries = {
  'China': 1371060000,
  'India': 1274440000,
  'United States': 321450000,
  'Indonesia': 255461700,
  'Brazil': 204633000,
  'Pakistan': 190402000,
  'Nigeria': 183523000,
  'Bangladesh': 158712000,
  'Russia': 146524812,
  'Japan': 126890000,
  'Mexico': 121005815,
  'Philippines': 101776400,
  'Vietnam': 91583000,
  'Ethiopia': 90076012,
  'Egypt': 89164100,
  'Germany': 81083600,
  'Iran': 78501300,
  'Turkey': 77695904,
  'Democratic Republic of the Congo': 71246000,
  'France': 66162000,
  'Thailand': 65104000,
  'United Kingdom': 64800000,
  'Italy': 60788845,
  'South Africa': 54002000,
  'South Korea': 51431100,
  'Burma': 51419420,
  'Colombia': 48224500,
  'Tanzania': 47421786,
  'Kenya': 46749000,
  'Spain': 46439864,
  'Argentina': 43131966,
  'Ukraine': 42854106,
  'Algeria': 40400000,
  'Poland': 38484000,
  'Sudan': 38435252,
  'Iraq': 36004552,
  'Canada': 35749600,
  'Uganda': 34856813,
  'Morocco': 33337529,
  'Saudi Arabia': 31521418,
  'Peru': 31151643,
  'Uzbekistan': 31022500,
  'Malaysia': 30649600,
  'Venezuela': 30620404,
  'Nepal': 28037904,
  'Afghanistan': 27101365,
  'Ghana': 27043093,
  'Yemen': 25956000,
  'Mozambique': 25727911,
  'North Korea': 25155000,
  'Angola': 24383301,
  'Australia': 23838300,
  'Taiwan': 23461562,
  'Syria': 23295466,
  'Ivory Coast': 22671331,
  'Madagascar': 21842167,
  'Cameroon': 21143237,
  'Sri Lanka': 20675000,
  'Romania': 19942642,
  'Niger': 19268000,
  'Burkina Faso': 18450494,
  'Chile': 18006407,
  'Kazakhstan': 17519000,
  'Netherlands': 16911900,
  'Malawi': 16310431,
  'Mali': 16259000,
  'Guatemala': 16176133,
  'Ecuador': 15532000,
  'Zambia': 15473905,
  'Cambodia': 15405157,
  'Chad': 13606000,
  'Senegal': 13508715,
  'Zimbabwe': 13061239,
  'South Sudan': 11892934,
  'Bolivia': 11410651,
  'Belgium': 11245629,
  'Cuba': 11238317,
  'Somalia': 11123000,
  'Rwanda': 10996891,
  'Tunisia': 10982754,
  'Haiti': 10911819,
  'Greece': 10903704,
  'Dominican Republic': 10652000,
  'Guinea': 10628972,
  'Czech Republic': 10538275,
  'Portugal': 10477800,
  'Benin': 10315244,
  'Hungary': 9849000,
  'Burundi': 9823827,
  'Sweden': 9784445,
  'Azerbaijan': 9636300,
  'United Arab Emirates': 9577000,
  'Belarus': 9481000,
  'Honduras': 8725111,
  'Austria': 8602112,
  'Israel': 8358100,
  'Tajikistan': 8354000,
  'Switzerland': 8256000,
  'Papua New Guinea': 7398500,
  'Hong Kong (China)': 7264100,
  'Bulgaria': 7202198,
  'Togo': 7171000,
  'Serbia': 7146759,
  'Paraguay': 7003406,
  'Laos': 6802000,
  'Jordan': 6756140,
  'Eritrea': 6738000,
  'El Salvador': 6401240,
  'Sierra Leone': 6319000,
  'Libya': 6317000,
  'Nicaragua': 6134270,
  'Kyrgyzstan': 5935400,
  'Denmark': 5668743,
  'Finland': 5478002,
  'Singapore': 5469700,
  'Slovakia': 5421349,
  'Norway': 5176998,
  'Central African Republic': 4803000,
  'Costa Rica': 4773130,
  'Turkmenistan': 4751120,
  'Palestine': 4682467,
  'Republic of the Congo': 4671000,
  'Ireland': 4609600,
  'New Zealand': 4597210,
  'Liberia': 4503000,
  'Croatia': 4267558,
  'Oman': 4159667,
  'Lebanon': 4104000,
  'Bosnia and Herzegovina': 3791622,
  'Panama': 3764166,
  'Georgia': 3729500,
  'Mauritania': 3631775,
  'Moldova': 3555200,
  'Puerto Rico (U.S.)': 3548397,
  'Somaliland (Somalia)': 3500000,
  'Uruguay': 3415866,
  'Kuwait': 3268431,
  'Mongolia': 3027126,
  'Armenia': 3006800,
  'Lithuania': 2904391,
  'Albania': 2893005,
  'Jamaica': 2717991,
  'Qatar': 2344557,
  'Namibia': 2280700,
  'Lesotho': 2120000,
  'Slovenia': 2067364,
  'Macedonia': 2065769,
  'Botswana': 2056000,
  'Latvia': 1980700,
  'The Gambia': 1882450,
  'Kosovo': 1827231,
  'Guinea-Bissau': 1788000,
  'Gabon': 1751000,
  'Equatorial Guinea': 1430000,
  'Trinidad and Tobago': 1328019,
  'Bahrain': 1316500,
  'Estonia': 1313271,
  'Mauritius': 1261208,
  'East Timor': 1212107,
  'Swaziland': 1119375,
  'Djibouti': 900000,
  'Fiji': 859178,
  'Cyprus': 858000,
  'Réunion (France)': 844994,
  'Comoros': 784745,
  'Bhutan': 762880,
  'Guyana': 746900,
  'Macau (China)': 640700,
  'Montenegro': 620029,
  'Solomon Islands': 581344,
  'Luxembourg': 562958,
  'Suriname': 534189,
  'Cape Verde': 518467,
  'Western Sahara': 510713,
  'Transnistria': 505153,
  'Malta': 445426,
  'Guadeloupe (France)': 405739,
  'Brunei': 393372,
  'Martinique (France)': 381326,
  'The Bahamas': 368390,
  'Belize': 358899,
  'Maldives': 341256,
  'Iceland': 329740,
  'Northern Cyprus': 294396,
  'Barbados': 285000,
  'New Caledonia (France)': 268767,
  'French Polynesia (France)': 268270,
  'Vanuatu': 264652,
  'Abkhazia': 240705,
  'French Guiana (France)': 239648,
  'Mayotte (France)': 212645,
  'Samoa': 187820,
  'São Tomé and Príncipe': 187356,
  'Saint Lucia': 185000,
  'Guam (U.S.)': 159358,
  'Curaçao (Netherlands)': 154843,
  'Nagorno-Karabakh Republic': 146573,
  'Saint Vincent and the Grenadines': 109000,
  'Aruba (Netherlands)': 107394,
  'Kiribati': 106461,
  'United States Virgin Islands (U.S.)': 106405,
  'Grenada': 103328,
  'Tonga': 103252,
  'Federated States of Micronesia': 101351,
  'Jersey (UK)': 99000,
  'Seychelles': 89949,
  'Antigua and Barbuda': 86295,
  'Isle of Man (UK)': 84497,
  'Ceuta (Spain)': 82376,
  'Melilla (Spain)': 78476,
  'Andorra': 76949,
  'Dominica': 71293,
  'Guernsey (UK)': 65150,
  'Bermuda (UK)': 64237,
  'Marshall Islands': 56086,
  'Greenland': 55984,
  'Cayman Islands (UK)': 55691,
  'American Samoa (U.S.)': 55519,
  'Saint Kitts and Nevis': 55000,
  'Northern Mariana Islands (U.S.)': 53883,
  'South Ossetia': 51547,
  'Faroe Islands (Denmark)': 48724,
  'Sint Maarten (Netherlands)': 37429,
  'Liechtenstein': 37370,
  'Monaco': 37800,
  'Saint-Martin (France)': 36522,
  'San Marino': 32789,
  'Turks and Caicos Islands (UK)': 31458,
  'Gibraltar (UK)': 30001,
  'Åland Islands (Finland)': 28875,
  'British Virgin Islands (UK)': 28054,
  'Palau': 20901,
  'Bonaire (Netherlands)': 17408,
  'Cook Islands (New Zealand)': 14974,
  'Anguilla (UK)': 13452,
  'Wallis and Futuna (France)': 13135,
  'Tuvalu': 11323,
  'Nauru': 10084,
  'Saint Barthélemy (France)': 9269,
  'Saint Pierre and Miquelon (France)': 6069,
  'Montserrat (UK)': 4922,
  'Sint Eustatius (Netherlands)': 4020,
  'Saint Helena, Ascension and Tristan da Cunha (UK)': 4000,
  'Falkland Islands (UK)': 3000,
  'Svalbard and Jan Mayen (Norway)': 2562,
  'Norfolk Island (Australia)': 2302,
  'Christmas Island (Australia)': 2072,
  'Saba (Netherlands)': 1991,
  'Niue (New Zealand)': 1613,
  'Tokelau (NZ)': 1411,
  'Vatican City': 839,
  'Cocos (Keeling) Islands (Australia)': 550,
  'Wake Island (U.S.)': 188,
  'French Southern and Antarctic Lands (France)': 140,
  'Pitcairn Islands (UK)': 56,
  'Midway Atoll (U.S.)': 40,
};

var sortedKeys = Object.keys(countries);
var sum = 0;

sortedKeys.map(function(key) {
  sum += countries[key];
});

function countryUpdate () {
  var countryHeader = document.getElementById('countryheader');
  var retryButton = document.getElementById('retrybutton');
  countryHeader.style.opacity = 0;
  retryButton.style.opacity = 0.8;
  retryButton.disabled = true;

  setTimeout(function() {
    var opacity = 0;
    var animate = setInterval(function() {

      opacity += 0.025;

      countryHeader.style.opacity = opacity;
      
      if (opacity >= 1) {
        clearInterval(animate);
        retryButton.style.opacity = 1;
        retryButton.disabled = false;
      }

    }, 50);
  }, 1000);

  var personNumber = Math.floor(Math.random() * sum);

  var runningSum = 0;
  for (var i = 0; i < sortedKeys.length; i++) {
    var key = sortedKeys[i];
    runningSum += countries[key];
    if (runningSum > personNumber) {
      document.getElementById('country').innerHTML = key;
      break;
    }
  }
}

window.onload = countryUpdate;
